<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>성탄 챌린지 - 일기장</title>
  <link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png">
  <link rel="manifest" href="/favicon/site.webmanifest">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tailwindplus/elements@1" type="module"></script>
  <link rel="stylesheet" href="/css/animations.css">
  <style>
    /* Snow Animation */
    .snowflakes {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      overflow: hidden;
      z-index: 1;
    }

    .snowflake {
      position: absolute;
      top: -50px;
      color: #fff;
      font-size: 1rem;
      text-shadow: 0 0 5px rgba(255, 255, 255, 0.8);
      animation: fall linear infinite;
      opacity: 0;
    }

    @keyframes fall {
      0% {
        transform: translateY(0) rotate(0deg);
        opacity: 0;
      }
      10% {
        opacity: 0.8;
      }
      90% {
        opacity: 0.8;
      }
      100% {
        transform: translateY(100vh) rotate(360deg);
        opacity: 0;
      }
    }

    /* Different snowflake positions and speeds */
    .snowflake:nth-child(1) { left: 10%; animation-duration: 10s; animation-delay: 0s; font-size: 0.9rem; }
    .snowflake:nth-child(2) { left: 30%; animation-duration: 12s; animation-delay: 1.5s; font-size: 1.1rem; }
    .snowflake:nth-child(3) { left: 50%; animation-duration: 11s; animation-delay: 0.5s; font-size: 0.85rem; }
    .snowflake:nth-child(4) { left: 70%; animation-duration: 14s; animation-delay: 2s; font-size: 1rem; }
    .snowflake:nth-child(5) { left: 90%; animation-duration: 9s; animation-delay: 1s; font-size: 0.95rem; }
  </style>
</head>
<body class="h-screen flex flex-col overflow-hidden">
  <!-- Snow Effect -->
  <div class="snowflakes" aria-hidden="true">
    <div class="snowflake">❄</div>
    <div class="snowflake">❅</div>
    <div class="snowflake">❆</div>
    <div class="snowflake">❄</div>
    <div class="snowflake">❅</div>
  </div>

  <div class="bg-gray-900 h-full flex flex-col relative">
    <!-- 하단 배경 이미지 -->
    <div class="absolute bottom-0 left-0 right-0 pointer-events-none z-0 flex justify-center">
      <div class="relative w-full">
        <img src="/images/tangie-bg.webp" alt="" class="w-full h-auto object-cover object-bottom" aria-hidden="true">
        <!-- 상단으로 갈수록 어두워지는 그라데이션 오버레이 -->
        <div class="absolute inset-0 bg-gradient-to-t from-transparent via-gray-900/50 to-gray-900"></div>
      </div>
    </div>

    <header class="flex-none bg-transparent z-50 relative">
      <nav aria-label="Global" class="flex items-center justify-between px-5 py-4 lg:px-7">
        <div class="flex items-center ml-2">
          <a href="/christmas/home" class="-m-1 p-1 inline-flex items-center justify-center">
            <span class="sr-only">홈</span>
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" class="w-6 h-6 text-gray-300">
              <path d="m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
          </a>
        </div>
        <div class="flex-1 flex items-center justify-center">
          <h1 class="text-lg font-semibold text-white">일기장</h1>
        </div>
        <div class="flex mr-2">
          <!-- Placeholder for balance -->
          <div class="w-6 h-6"></div>
        </div>
      </nav>
    </header>

    <!-- Page Title Section -->
    <div class="relative isolate flex-none z-20 pt-4">
      <div class="mx-auto max-w-7xl px-5 lg:px-7">
        <div class="text-center relative z-[10000]">
          <div class="flex items-center justify-center gap-3">
            <button id="diary-filter-button" type="button" aria-haspopup="menu" aria-expanded="false" class="group flex cursor-pointer justify-center items-center gap-2 rounded-lg min-h-9 px-3 py-1.5 text-2xl font-bold tracking-tight hover:bg-white/10 focus-visible:bg-white/10 focus-visible:outline-none transition-colors whitespace-nowrap">
              <span id="diary-filter-text" class="text-white text-outline-thin">성탄 일기장</span>
              <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="text-gray-300">
                <path d="M12.1338 5.94433C12.3919 5.77382 12.7434 5.80202 12.9707 6.02929C13.1979 6.25656 13.2261 6.60807 13.0556 6.8662L12.9707 6.9707L8.47067 11.4707C8.21097 11.7304 7.78896 11.7304 7.52926 11.4707L3.02926 6.9707L2.9443 6.8662C2.77379 6.60807 2.80199 6.25656 3.02926 6.02929C3.25653 5.80202 3.60804 5.77382 3.86617 5.94433L3.97067 6.02929L7.99996 10.0586L12.0293 6.02929L12.1338 5.94433Z"></path>
              </svg>
            </button>

            <!-- Dropdown Menu -->
            <div id="diary-filter-menu" class="hidden absolute top-full mt-2 left-1/2 -translate-x-1/2 bg-white rounded-xl shadow-lg border border-gray-200 py-2 min-w-48 z-[100]">
              <button data-filter="all" class="diary-filter-option w-full text-left px-4 py-2.5 hover:bg-green-50 transition-colors flex items-center justify-between">
                <span class="text-sm font-medium text-gray-900">성탄 일기장</span>
                <svg class="filter-check w-4 h-4 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                </svg>
              </button>
              <div class="border-t border-gray-200 my-2"></div>
              <button data-filter="성탄절에 대한 질문" class="diary-filter-option w-full text-left px-4 py-2.5 hover:bg-green-50 transition-colors flex items-center justify-between">
                <span class="text-sm font-medium text-gray-900">성탄절에 대한 질문</span>
                <svg class="filter-check hidden w-4 h-4 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                </svg>
              </button>
              <button data-filter="성탄절을 기다리는 기도" class="diary-filter-option w-full text-left px-4 py-2.5 hover:bg-green-50 transition-colors flex items-center justify-between">
                <span class="text-sm font-medium text-gray-900">성탄절을 기다리는 기도</span>
                <svg class="filter-check hidden w-4 h-4 text-green-600" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                </svg>
              </button>
            </div>
          </div>
          <p class="mt-1 text-sm text-gray-300 text-outline-thin">오늘 우리가 나눈 이야기들</p>
        </div>
      </div>
    </div>

    <!-- Summary Stats -->
    <div class="flex-none z-10 py-4">
      <div class="mx-auto max-w-7xl px-5 lg:px-7">
        <div class="max-w-lg mx-auto">
          <div class="px-2">
            <p id="diary-stats-text" class="text-sm text-gray-300">
              전체 <span class="font-semibold text-gray-300">0</span>개
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Scrollable Content Area -->
    <div class="relative flex-1 overflow-y-auto z-10">
      <div class="mx-auto max-w-7xl px-5 lg:px-7 pb-32">
        <div class="max-w-lg mx-auto">
          <!-- Diary List -->
          <div id="diary-list" class="space-y-3.5">
            <!-- Loading skeleton -->
            <div class="diary-skeleton">
              <div class="rounded-xl bg-white/20 backdrop-blur-sm px-6 py-5 animate-pulse">
                <div class="space-y-3">
                  <div class="h-4 bg-white/30 rounded w-full"></div>
                  <div class="h-4 bg-white/20 rounded w-4/5"></div>
                  <div class="flex items-center justify-end">
                    <div class="h-3 bg-white/20 rounded w-24"></div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Empty state (hidden by default) -->
            <div id="diary-empty" class="hidden text-center py-20">
              <p class="text-gray-400">아직 작성한 일기가 없습니다.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- 하단 여백 -->
      <div class="h-[30vh]"></div>
    </div>
  </div>

  <script type="module">
    import { initDiaryChristmasPage } from '/static/js/pages/diaryChristmasPage.js';

    // 페이지 로드 시 초기화
    document.addEventListener('DOMContentLoaded', async function() {
      await initDiaryChristmasPage();
    });
  </script>
</body>
</html>
